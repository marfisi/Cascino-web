<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui" xmlns:pc="http://java.sun.com/jsp/jstl/core" xmlns:fn="http://java.sun.com/jsp/jstl/functions">
<h:head></h:head>
<h:body>
	<ui:composition template="template.xhtml">
		<ui:define name="head">
			<h:outputStylesheet library="css" name="mostraInfoArticolo.css" />
		</ui:define>

		<ui:define name="content">
			<h:form id="growlForm">
				<p:growl id="growl" showDetail="true" life="4000" />
			</h:form>

			<h:form id="infoForm">
				<h:outputText value="#{mostraInfoArticoloReqSController.recuperaCodiceArticolo()}" />
				<p:panelGrid columns="2" style="margin-top:20px" styleClass="testcss">
					<p:panelGrid columns="2" style="margin-top:20px;">
						<f:facet name="header">
							<p:row>
								<p:column colspan="2">
								<h:panelGrid style="width: 100%; color: blue; font-size: 200%; text-align: center;">
									<h:outputText value="#{mostraInfoArticoloViwSController.asAnmag0f.mcoda}" />
								</h:panelGrid>
								</p:column>
							</p:row>
						</f:facet>
						<p:column>
							<h:outputText value="Nome" />
						</p:column>
						<p:column>
							<h:outputText value="#{mostraInfoArticoloViwSController.asAnmag0f.mdesc}" />
						</p:column>
						<p:column>
							<h:outputText value="Ingrosso" />
						</p:column>
						<p:column>
							<h:panelGrid columns="1" style="border:none">
								<p:graphicImage value="#{((mostraInfoArticoloViwSController.asAnmag0f.mdepi == 1) || (mostraInfoArticoloViwSController.asAnmag0f.mdepi == 3)) ? './resources/gfx/foto/varie/catalogo.png' : null}" height="60px"/>
								<h:outputText value="#{((mostraInfoArticoloViwSController.asAnmag0f.mdepi == 1) || (mostraInfoArticoloViwSController.asAnmag0f.mdepi == 3)) ? 'INGROSSO' : null}" />
								<h:outputText value="dep: #{mostraInfoArticoloViwSController.asAnmag0f.mdepi}" />
							</h:panelGrid>
						</p:column>
						<p:column>
							<h:outputText value="Marca" />
						</p:column>
							<h:panelGrid columns="1">
								<p:column>
									<p:graphicImage value="./resources/gfx/foto/#{asAnmar0fController.trimString(asTabe20fController.getMarchio(mostraInfoArticoloViwSController.asAnmag0f.march).tbcom)}" height="#{asAnmar0fController.getHeightFromResolution(asTabe20fController.getMarchio(mostraInfoArticoloViwSController.asAnmag0f.march).tbcom, 150, 250)}" />
									<h:outputText value="#{asTabe20fController.getMarchio(mostraInfoArticoloViwSController.asAnmag0f.march).tbcom}" />
								</p:column>
								<p:outputPanel style="font-size: 120%;">
									<p:column>
										<h:outputText value="#{asTabe20fController.getNomeMarchio(mostraInfoArticoloViwSController.asAnmag0f.march)}" />
									</p:column>
								</p:outputPanel>
								<p:outputPanel style="font-size: 70%;">
									<p:column>
										<h:outputText value="#{mostraInfoArticoloViwSController.asAnmag0f.march}" />
									</p:column>
								</p:outputPanel>
							</h:panelGrid>
						<p:column>
							<h:outputText value="Codice Raggruppamento" />
						</p:column>
						<p:column>
							<h:outputText value="#{mostraInfoArticoloViwSController.asAnmag0f.mcomp}" />
						</p:column>
						<p:column>
							<h:outputText value="Descrizione Breve Raggruppamento" />
						</p:column>
						<p:column>
							<h:outputText value="#{asAnmar0fController.getGruppoDaMcomp(mostraInfoArticoloViwSController.asAnmag0f.mcomp).mdes1}" />
						</p:column>
						<p:column>
							<h:outputText value="Descrizione Lunga Raggruppamento" />
						</p:column>
						<p:column>
							<h:outputText value="#{asAnmar0fController.getGruppoDaMcomp(mostraInfoArticoloViwSController.asAnmag0f.mcomp).mdes2}#{asAnmar0fController.getGruppoDaMcomp(mostraInfoArticoloViwSController.asAnmag0f.mcomp).mdes3}" />
						</p:column>	
						<p:column>
							<h:outputText value="Albero Merceologico" />
						</p:column>
						<p:column>
							<h:panelGrid columns="1" width="80%" style="border:none" >
								<p:outputPanel style="color: limegreen; font-size: 110%;">
									<p:column>
										<h:outputText value="#{mostraInfoArticoloViwSController.asAnmag0f.madiv} - #{mostraInfoArticoloViwSController.asAnmag0f.magru} - #{mostraInfoArticoloViwSController.asAnmag0f.masot} - #{mostraInfoArticoloViwSController.asAnmag0f.mafam} - #{mostraInfoArticoloViwSController.asAnmag0f.mastf} - #{mostraInfoArticoloViwSController.asAnmag0f.mast1}" />
									</p:column>
								</p:outputPanel>
								<p:outputPanel style="font-size: 70%;">
									<p:column>
										<h:outputText value="+ #{asAlmer0fController.getAmdes(mostraInfoArticoloViwSController.asAnmag0f.madiv, mostraInfoArticoloViwSController.asAnmag0f.magru, '', '', '', '')}" />
									</p:column>
								</p:outputPanel>
								<p:outputPanel style="font-size: 70%;">
									<p:column>
										<h:outputText value="++ #{asAlmer0fController.getAmdes(mostraInfoArticoloViwSController.asAnmag0f.madiv, mostraInfoArticoloViwSController.asAnmag0f.magru, mostraInfoArticoloViwSController.asAnmag0f.masot, '', '', '')}" />
									</p:column>
								</p:outputPanel>
								<p:outputPanel style="font-size: 70%;">
									<p:column>
										<h:outputText value="+++ #{asAlmer0fController.getAmdes(mostraInfoArticoloViwSController.asAnmag0f.madiv, mostraInfoArticoloViwSController.asAnmag0f.magru, mostraInfoArticoloViwSController.asAnmag0f.masot, mostraInfoArticoloViwSController.asAnmag0f.mafam, '', '')}" />
									</p:column>
								</p:outputPanel>
								<p:outputPanel style="color: green; font-size: 160%;">
									<p:column >
										<h:outputText value="#{asAlmer0fController.getAmdes(mostraInfoArticoloViwSController.asAnmag0f.madiv, mostraInfoArticoloViwSController.asAnmag0f.magru, mostraInfoArticoloViwSController.asAnmag0f.masot, mostraInfoArticoloViwSController.asAnmag0f.mafam, mostraInfoArticoloViwSController.asAnmag0f.mastf, '')}" />
									</p:column>
								</p:outputPanel>
							</h:panelGrid>
						</p:column>
						<p:column>
							<h:outputText value="Foto" />
						</p:column>
						<p:column>
							<h:panelGrid columns="1" style="border:none">
								<p:column>
									<p:commandLink oncomplete="PF('zoomFoto').show()" update=":zoomPanel" styleClass="zoomLink" >
										<p:graphicImage value="./resources/gfx/foto/#{asAnmar0fController.trimString(asAnmar0fController.getGruppoDaMcomp(mostraInfoArticoloViwSController.asAnmag0f.mcomp).mfoto)}" height="#{asAnmar0fController.getHeightFromResolution(asAnmar0fController.getGruppoDaMcomp(mostraInfoArticoloViwSController.asAnmag0f.mcomp).mfoto, 300, 300)}" oncomplete="PF('zoomFoto').show()" update=":zoomPanel" />
									</p:commandLink>
								</p:column>
								<p:column>
									<h:outputText value="#{asAnmar0fController.getGruppoDaMcomp(mostraInfoArticoloViwSController.asAnmag0f.mcomp).mfoto}" />
								</p:column>
							</h:panelGrid>
						</p:column>
						<p:column>
							<h:outputText value="Articoli del raggruppamento" />
						</p:column>
						<p:column>
							<p:dataTable id="tblArt" var="artdigrp" value="#{asAnmag0fController.getArticoliDaMcomp(mostraInfoArticoloViwSController.asAnmag0f.mcomp)}" >
								<p:column style="width: 10%;">
									<f:facet name="header">
										<h:outputText value="Codice Articolo" />
									</f:facet>
									<p:link value="#{artdigrp.mcoda}" target="_blank">
										<f:param name="codArt" value="#{artdigrp.mcoda}" />
									</p:link>									
								</p:column>
								<p:column style="width: 9%;">
									<f:facet name="header">
										<h:outputText value="Descrizione" />
									</f:facet>
									<h:outputText value="#{artdigrp.mdesc}" />
								</p:column>
								<p:column style="width: 8%;">
									<f:facet name="header">
										<h:outputText value="Marca" />
									</f:facet>
									<h:panelGrid columns="1" width="50" style="border:none">
										<p:column>
											<p:graphicImage value="./resources/gfx/foto/#{asAnmar0fController.trimString(asTabe20fController.getMarchio(artdigrp.march).tbcom)}" height="#{asAnmar0fController.getHeightFromResolution(asTabe20fController.getMarchio(artdigrp.march).tbcom, 80, 80)}" />
											<h:outputText value="#{asTabe20fController.getMarchio(artdigrp.march).tbcom}" />
										</p:column>
										<p:outputPanel style="font-size: 120%;">
											<p:column>
												<h:outputText value="#{asTabe20fController.getNomeMarchio(artdigrp.march)}" />
											</p:column>
										</p:outputPanel>
										<p:outputPanel style="font-size: 70%;">
											<p:column>
												<h:outputText value="#{artdigrp.march}" />
											</p:column>
										</p:outputPanel>
									</h:panelGrid>
								</p:column>
								<p:column style="width: 4%;">
									<f:facet name="header">
										<h:outputText value="Ingrosso" />
									</f:facet>
									<p:graphicImage value="#{((artdigrp.mdepi == 1) || (artdigrp.mdepi == 3)) ? './resources/gfx/foto/varie/catalogo.png' : null}" height="60px"/>
									<h:outputText value="dep: #{artdigrp.mdepi}" />
								</p:column>
								<p:column style="width: 3%;">
									<f:facet name="header">
										<h:outputText value="Attivo/Annullato" />
									</f:facet>
									<h:outputText value="#{(artdigrp.atama == ' ') ? 'ok' : 'ANNULLATO'}" />
								</p:column>
								<p:column style="width: 28%;">
									<f:facet name="header">
										<h:outputText value="Albero Merceologico" />
									</f:facet>
									<h:panelGrid columns="1" width="50" style="border:none">
										<p:outputPanel style="color: limegreen; font-size: 110%;">
											<p:column>
												<h:outputText value="#{artdigrp.madiv} - #{artdigrp.magru} - #{artdigrp.masot} - #{artdigrp.mafam} - #{artdigrp.mastf} - #{artdigrp.mast1}" />
											</p:column>
										</p:outputPanel>
										<p:outputPanel style="font-size: 70%;">
											<p:column>
												<h:outputText value="+ #{asAlmer0fController.getAmdes(artdigrp.madiv, artdigrp.magru, '', '', '', '')}" />
											</p:column>
										</p:outputPanel>
										<p:outputPanel style="font-size: 70%;">
											<p:column>
												<h:outputText value="++ #{asAlmer0fController.getAmdes(artdigrp.madiv, artdigrp.magru, artdigrp.masot, '', '', '')}" />
											</p:column>
										</p:outputPanel>
										<p:outputPanel style="font-size: 70%;">
											<p:column>
												<h:outputText value="+++ #{asAlmer0fController.getAmdes(artdigrp.madiv, artdigrp.magru, artdigrp.masot, artdigrp.mafam, '', '')}" />
											</p:column>
										</p:outputPanel>
										<p:outputPanel style="color: green; font-size: 160%;">
											<p:column >
												<h:outputText value="#{asAlmer0fController.getAmdes(artdigrp.madiv, artdigrp.magru, artdigrp.masot, artdigrp.mafam, artdigrp.mastf, '')}" />
											</p:column>
										</p:outputPanel>
									</h:panelGrid>
								</p:column>
								<p:column style="width: 38%;">
									<f:facet name="header">
										<h:outputText value="Caratteristiche" />
									</f:facet>
									<p:dataTable id="tblCar" var="carart" value="#{asCaratController.getArticoliDaMcomp(artdigrp.mcoda)}" emptyMessage="">								
										<p:column style="width: 40%;">
											<f:facet name="header">
												<h:outputText value="Caratteristica" />
											</f:facet>
											<h:outputText value="#{carart[8]}" />								
										</p:column>
										<p:column style="width: 10%;">
											<f:facet name="header">
												<h:outputText value="Un. Mis." />
											</f:facet>
											<p:outputPanel style="font-size: 80%;">
												<p:column >
													<h:outputText value="#{carart[9]}" />
												</p:column>
											</p:outputPanel>	
										</p:column>
										<p:column style="width: 40%;">
											<f:facet name="header">
												<h:outputText value="Valore" />
											</f:facet>
											<p:outputPanel style="color: green; font-size: 160%;">
												<p:column >
													<h:outputText value="#{carart[7]}" />
												</p:column>
											</p:outputPanel>
										</p:column>
										<p:column style="width: 10%;">
											<f:facet name="header">
												<h:outputText value="id car" />
											</f:facet>
											<p:outputPanel style="font-size: 70%;">
												<p:column >
													<h:outputText value="#{carart[5]}.#{carart[6]}" />
												</p:column>
											</p:outputPanel>
										</p:column>
									</p:dataTable>
								</p:column>	
							</p:dataTable>
						</p:column>
					</p:panelGrid>
				</p:panelGrid>
			</h:form>
			
			<p:dialog id="zoomDialog" header="Zoom" widgetVar="zoomFoto" showEffect="scale" hideEffect="puff" modal="true" height="810" width="810" styleClass="zoomFoto" >
				<p:panel id="zoomPanel">
					<!-- p:graphicImage value="#{fotoController.resolvePath(fotoController.fotoSel)}#{fotoController.getFotonameUrl(fotoController.fotoSel, 1)}" height="#{fotoController.getHeightFromResolution(fotoController.fotoSel, 1, 800, 800)}" styleClass="zoomFoto" /-->
					<p:graphicImage value="./resources/gfx/foto/#{asAnmar0fController.trimString(asAnmar0fController.getGruppoDaMcomp(mostraInfoArticoloViwSController.asAnmag0f.mcomp).mfoto)}" height="#{asAnmar0fController.getHeightFromResolution(asAnmar0fController.getGruppoDaMcomp(mostraInfoArticoloViwSController.asAnmag0f.mcomp).mfoto, 590, 590)}" styleClass="zoomFoto" />
				</p:panel>
			</p:dialog>

		</ui:define>
	</ui:composition>
</h:body>
</html>