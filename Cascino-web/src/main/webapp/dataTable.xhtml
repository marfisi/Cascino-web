<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.prime.com.tr/ui">
<h:head>...</h:head>
<h:body>
<p:dataTable var="contact" 
	id="tbl" selection="#{contactsBean.contact}"
	value="#{contactsBean.contacts}" 
	selectionMode="single"
	update="updForm:updDisplay"
	onselectComplete="updDialog.show()" 
	paginator="true" rows="5">
	
	<p:column>
		<f:facet name="header">
			<h:outputText value="Nome" />
		</f:facet>
		<h:outputText value="#{contact.nome}" />
	</p:column>
	<p:column>
		<f:facet name="header">
			<h:outputText value="Cognome" />
		</f:facet>
		<h:outputText value="#{contact.cognome}" />
	</p:column>
	<p:column>
		<f:facet name="header">
			<h:outputText value="Telefono" />
		</f:facet>
		<h:outputText value="#{contact.telefono}" />
	</p:column>
	<p:column>
		<f:facet name="header">
			<h:outputText value="Professione" />
		</f:facet>
		<h:outputText value="#{contact.professione}" />
	</p:column>
	<f:facet name="footer">
		<h:panelGroup>
			<h:commandLink>
				<p:graphicImage value="/images/excel.png" style="border:none" />
				<p:dataExporter type="xls" target="tbl" fileName="contacts" pageOnly="true" />
			</h:commandLink>
			<h:commandLink>
				<p:graphicImage value="/images/pdf.png" style="border:none" />
				<p:dataExporter type="pdf" target="tbl" fileName="contacts" pageOnly="true" />
			</h:commandLink>
			<h:commandLink>
				<p:graphicImage value="/images/csv.png" style="border:none" />
				<p:dataExporter type="csv" target="tbl" fileName="contacts" pageOnly="true" />
			</h:commandLink>
			<h:commandLink>
				<p:graphicImage value="/images/xml.png" style="border:none" />
				<p:dataExporter type="xml" target="tbl" fileName="contacts" pageOnly="true" />
			</h:commandLink>
		</h:panelGroup>
	</f:facet>
</p:dataTable>

<h:form id="updForm">
	<h:panelGrid columns="2">
		<p:commandButton oncomplete="newDialog.show()" value="Nuovo Contatto" update="newDisplay" />
		<p:themeSwitcher initialText="Cambia tema"></p:themeSwitcher>
	</h:panelGrid>
	<p:dialog widgetVar="updDialog" header="Contatto" width="430" height="220" modal="true">
		<p:outputPanel id="updDisplay">
			<h:inputHidden value="#{contactsBean.contact.id}" />
			<h:panelGrid columns="2">
				<h:outputLabel value="Nome" />
				<p:inputText value="#{contactsBean.contact.nome}"></p:inputText>
				<h:outputLabel value="Cognome" />
				<p:inputText value="#{contactsBean.contact.cognome}"></p:inputText>
				<h:outputLabel value="Telefono" />
				<p:inputText value="#{contactsBean.contact.telefono}"></p:inputText>
				<h:outputLabel value="Professione" />
				<p:inputText value="#{contactsBean.contact.professione}"></p:inputText>
			</h:panelGrid>
			<p:commandButton value="Aggiorna" 
				actionListener="#{contactsBean.aggiorna}" 
				update="contact,growl" 
				onclick="updDialog.close()">
			</p:commandButton>
		    <p:commandButton value="Elimina"
		    	actionListener="#{contactsBean.elimina}" 
		    	update="contact,growl"
		    	onclick="updDialog.close()">
		    </p:commandButton>
		    <p:growl id="growl" showDetail="true"  />
		</p:outputPanel>
	</p:dialog>		 
</h:form>

<h:form>
    <p:dialog widgetVar="newDialog" header="Inserisci Contatto"  width="430" height="220" modal="true">
        <p:outputPanel id="newDisplay">
            <h:panelGrid columns="2">
                <h:outputLabel value="Nome" />
                <p:inputText value="#{contactsBean.contact.nome}"></p:inputText>
                <h:outputLabel value="Cognome" />
                <p:inputText value="#{contactsBean.contact.cognome}"></p:inputText>
                <h:outputLabel value="Telefono" />
                <p:inputText value="#{contactsBean.contact.telefono}"></p:inputText>
                <h:outputLabel value="Professione" />
                <p:inputText value="#{contactsBean.contact.professione}"></p:inputText>
            </h:panelGrid>
            <p:commandButton value="Salva"
                actionListener="#{contactsBean.salva}"
                update="contact"
                onclick="newDialog.close()">
            </p:commandButton>
        </p:outputPanel>
    </p:dialog>
</h:form>

<p:commandButton value="Aggiorna"
    ajax="true"
    actionListener="#{contactsBean.aggiorna}"
    update="tbl,growl"
    onclick="updDialog.close()">
</p:commandButton>
<p:commandButton value="Elimina"
    ajax="true"
    actionListener="#{contactsBean.elimina}"
    update="tbl,growl"
    onclick="updDialog.close()">
</p:commandButton>

</h:body>
</html>